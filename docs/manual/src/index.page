---
title: Introduction
layout: default
tagline: An honest LDAP library.
index: 1
filters:
  - erb
  - links
  - examples
  - editorial
  - api
  - textile
example_prelude: |-
  require 'treequel'
---

h1. <%= page.config['title'] %>

<div id="auto-toc"></div>

This is a manual for Treequel, a Ruby library that is intended to make interacting with an LDAP directory natural and easy. It's built on top of "Ruby-LDAP":http://ruby-ldap.sourceforge.net/, so if you don't already have that installed you'll need to install it, and you'll need to have access to an LDAP server, of course. 

Once those things are done, you can fire Treequel up via IRb and get a <?api Treequel::Directory ?> object to play around with:

<?example { language: ruby, caption: "Fetching a directory.", testable: false } ?>
  $ irb -rtreequel -rubygems
  
  irb> $dir = Treequel.directory( 'ldap://localhost/dc=acme,dc=com' )
  => #<Treequel::Directory:0x69cbac localhost:389 (not connected) base="dc=acme,dc=com", 
       bound as=anonymous, schema=(schema not loaded)>
<?end ?>

h2. Branches

Once you have a directory, you can fetch entries from the directory hierarchy by traversing <abbr title="relative distinguished name">RDN</abbr>s. A traversal is accomplished by calling a method with the same name as the attribute half of the @RDN@ you want to traverse, and passing the desired value as the only argument to that method. Doign so yields a <?api "Branch":Treequel::Branch ?>, which is a wrapper around the resulting @DN@. The resulting @DN@ doesn't necessarily need to map to an extent entry in the directory. For instance, if you had an @OU@ for people called @People@, you could fetch a @Branch@ for it like so:

<?example { language: ruby, caption: "Fetching a branch ou=people.", testable: false } ?>
  irb> people = $dir.ou( :people )
  => #<Treequel::Branch:0x19a76d4 ou=people,dc=acme,dc=com @ localhost:389 
      (dc=acme,dc=com, tls, anonymous) entry=nil>
  irb> people.dn
  => "ou=people,dc=acme,dc=com"
<?end ?>

Then you can fetch the branch for individuals by fetching their branch by calling the @RDN@ method, too:

<?example { language: ruby, caption: "Fetching a branch for uid=mgranger,ou=people.", testable: false } ?>
  irb> me = people.uid( :mgranger )
  => #<Treequel::Branch:0x19a4970 uid=mgranger,ou=people,dc=acme,dc=com @ localhost:389
      (dc=acme,dc=com, tls, anonymous) entry=nil>
  irb> me.dn
  => "uid=mgranger,ou=people,dc=laika,dc=com"
<?end ?>

A @Branch@ can be 

<?example { language: ruby, caption: "Fetching an attribute.", testable: false } ?>
  irb> me[:gecos]
  => "Michael Granger"
<?end ?>

A convenient way to look at a branch's entry is via its @ldif@ string:

<?example { language: ruby, caption: "Viewing an entry as LDIF.", testable: false } ?>
  irb> puts me.to_ldif
	dn: uid=mgranger,ou=people,dc=acme,dc=com
	gidNumber: 200
	cn: Michael Granger
	l: Portland, OR
	givenName: Michael
	title: Lead Software Developer
	gecos: Michael Granger
	homeDirectory: /home/m/mgranger
	uid: mgranger
	mail: mgranger@acme.com
	sn: Granger
	mobile: +1 9075551212
	loginShell: /bin/base
	uidNumber: 2053
	objectClass: inetOrgPerson
	objectClass: organizationalPerson
	objectClass: person
	objectClass: top
	objectClass: posixAccount
	objectClass: shadowAccount
	objectClass: apple-user
	homePhone: +1 9075551212
	departmentNumber: 18
<?end?>	

h2. Authors

* Michael Granger


h2. License

Copyright Â© 2009, Michael Granger
All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are
permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this list of
  conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright notice, this list of
  conditions and the following disclaimer in the documentation and/or other materials
  provided with the distribution.
* Neither the name of the authors nor contributors may be used to endorse or promote products
  derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

<div id="cc-license">
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/">
	!http://i.creativecommons.org/l/by/3.0/88x31.png(Creative Commons License)!
</a><br/>
The content of this manual, including images, video, and any example source code is 
licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative 
	Commons Attribution 3.0 License</a>.
</div>
